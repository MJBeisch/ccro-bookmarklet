var CCROsettings={};function CCROsaveSettings(){CCROcreateCookie("CCROsettings",CCROsettings,3650)}function CCROopen(){$.getScript("https://mjbeisch.github.io/ccro-bookmarklet/CCROcookieFunctions.min.js",function(){$("head").append('<link rel="stylesheet" type="text/css" href="https://mjbeisch.github.io/ccro-bookmarklet/CCRObookmarklet.min.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">'),CCROreadCookie("CCROsettings")?CCROsettings=CCROcookies.getJSON("CCROsettings"):(CCROsettings={toggle:1},CCROsaveSettings()),CCROrenderValidationUI()})}function CCROclose(){CCROexpireCookie("CCROsettings"),$(".CCROoverlayui").remove()}function CCROtoggle(){1==CCROsettings.toggle?(CCROsettings.toggle=0,$(".CCROoverlayui").addClass("collapsed"),$(".CCROv-toggle .fa-minus").addClass("fa-plus").removeClass("fa-minus")):(CCROsettings.toggle=1,$(".CCROoverlayui").removeClass("collapsed"),$(".CCROv-toggle .fa-plus").addClass("fa-minus").removeClass("fa-plus")),CCROsaveSettings()}function CCROmarkActiveExperiment(e){$("#experiment-"+e);$("#experiment-"+e).addClass("active")}function CCROrenderValidationUI(){var e="",t=CCROreadCookie("_conv_v"),i=window.convert.data.experiments,o=Object.keys(i),n=window.convert.currentData.experiments,s=Object.keys(n),a=0,C=0;if(CCROreadCookie("CCROvalidation")&&(e="checked"),$(".CCROoverlayui").remove(),$("body").append('<div class="CCROoverlayui"><div class="CCROoverlayOptions">Validation Cookie <label class="CCROswitch CCROsetcookie"><input type="checkbox" '+e+'><span class="CCROslider CCROround"></span></label></div><div class="CCROoverlayuiscroll"><div class="CCROoverlayuicontent"></div></div><div class="CCROv-header"><div class="CCROv-ui-buttons"><button class="CCROv-toggle CCROv-button"><i class="fas fa-minus"></i></button><button class="CCROv-close CCROv-button"><i class="fas fa-times"></i></button></div><h2>Corvus CRO Experiment Overlay</h2></div></div>'),0==CCROsettings.toggle&&$(".CCROoverlayui").addClass("collapsed"),0<o.length){for($(".CCROoverlayuicontent").append('<table class="experimentlist"><caption>Experiment List</caption><thead><tr><th class="experiment-name">Experiment Name</th><th class="variations">Variations</th>\x3c!--<th class="results-link">Results</th>--\x3e</tr></thead><tbody></tbody></table>');a<o.length;++a){for(var c=o[a],l=i[c].n,r=i[c].vars,v=Object.keys(r),d=0,O="";d<v.length;++d){var R=v[d],p=r[R].name;null!=p&&(-1!=t.indexOf(R)?O+='<option value="'+R+'" selected>'+p+"</option>":O+='<option value="'+R+'">'+p+"</option>")}$(".CCROoverlayui .experimentlist").append('<tr id="experiment-'+c+'"><td class="experiment-name"><i class="fas fa-circle"></i> '+l+'</td><td class="variations"><select id="'+c+'">'+O+'</select></td>\x3c!--<td class="results-link"><a class="CCROv-button" href="#" target="_blank">View Results</a></td>--\x3e</tr>')}for(;C<s.length;++C)CCROmarkActiveExperiment(s[C]);$(".experimentlist .variations select").change(function(e){var t=$(this).attr("id"),i=$(this).val(),o=window.location.protocol+"//"+window.location.host+window.location.pathname;if(window.location.search)if(-1!=window.location.search.indexOf("convert_action=convert_vpreview")){var n=window.location.search.split(/convert_action=convert_vpreview&convert_v=\d+&convert_e=\d+/);o=o+n[0]+"convert_action=convert_vpreview&convert_v="+i+"&convert_e="+n[1]+window.location.hash}else o=o+"&convert_action=convert_vpreview&convert_v="+i+"&convert_e="+t+window.location.hash;else o=o+"?convert_action=convert_vpreview&convert_v="+i+"&convert_e="+t+window.location.hash;window.location=o})}else $(".CCROoverlayuicontent").append("<p>There are currently no experiments built for this site.</p>");$(".CCROsetcookie input").change(function(){$(this).is(":checked")?CCROcreateCookie("CCROvalidation","active",1):CCROexpireCookie("CCROvalidation")}),$(".CCROv-close").click(function(){CCROclose()}),$(".CCROv-toggle").click(function(){CCROtoggle()}),0<window.location.href.indexOf("ccroqc=active")&&(CCROcreateCookie("CCROvalidation","active",1),$(".CCROsetcookie input").prop("checked"))}void 0===window.$?function(){var e=document.createElement("SCRIPT");e.src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js",e.type="text/javascript",e.onload=function(){window.jQuery;CCROopen()},document.getElementsByTagName("head")[0].appendChild(e)}():CCROopen();